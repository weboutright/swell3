<!DOCTYPE html>
<html>
<head>
    <title>Hash Test</title>
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            padding: 40px; 
            background: #0a0a0a; 
            color: #00ff00; 
        }
        .box { 
            background: #1a1a1a; 
            border: 2px solid #00ff00; 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 8px;
        }
        h1 { color: #00ff00; text-shadow: 0 0 10px #00ff00; }
        .value { color: #ffff00; word-break: break-all; }
    </style>
</head>
<body>
    <h1>üîç URL Hash Debugger</h1>
    
    <div class="box">
        <h3>Current URL Info:</h3>
        <p><strong>Full URL:</strong><br><span class="value" id="fullUrl"></span></p>
        <p><strong>Hash:</strong><br><span class="value" id="hash"></span></p>
        <p><strong>Hash Length:</strong> <span class="value" id="hashLen"></span></p>
    </div>

    <div class="box">
        <h3>Session Token Test:</h3>
        <p><strong>Starts with #session=?</strong> <span class="value" id="hasSession"></span></p>
        <p><strong>Token Value:</strong><br><span class="value" id="tokenValue"></span></p>
        <p><strong>Token Length:</strong> <span class="value" id="tokenLen"></span></p>
    </div>

    <div class="box">
        <h3>LocalStorage:</h3>
        <p><strong>swell_session:</strong><br><span class="value" id="localStorage"></span></p>
    </div>

    <script>
        // Update immediately on load
        function update() {
            document.getElementById('fullUrl').textContent = window.location.href;
            document.getElementById('hash').textContent = window.location.hash || '(empty)';
            document.getElementById('hashLen').textContent = window.location.hash.length;
            
            const hasSession = window.location.hash.startsWith('#session=');
            document.getElementById('hasSession').textContent = hasSession ? '‚úÖ YES' : '‚ùå NO';
            
            if (hasSession) {
                const token = window.location.hash.substring('#session='.length);
                document.getElementById('tokenValue').textContent = token;
                document.getElementById('tokenLen').textContent = token.length;
                
                // Auto-save to localStorage
                localStorage.setItem('swell_session', token);
                console.log('‚úÖ Token saved to localStorage');
            } else {
                document.getElementById('tokenValue').textContent = '(no token in hash)';
                document.getElementById('tokenLen').textContent = '0';
            }
            
            const stored = localStorage.getItem('swell_session');
            document.getElementById('localStorage').textContent = stored ? stored.substring(0, 100) + '...' : '(empty)';
        }
        
        // Run immediately
        update();
        
        // Also log to console
        console.log('URL:', window.location.href);
        console.log('Hash:', window.location.hash);
        console.log('localStorage token:', localStorage.getItem('swell_session'));
    </script>
</body>
</html>
